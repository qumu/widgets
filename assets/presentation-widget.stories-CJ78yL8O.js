import{f as it,u as lt,i as at,x as st}from"./iframe-BMxiNplM.js";import"./preload-helper-PPVm8Dsz.js";const ct=t=>(e,n)=>{n!==void 0?n.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)};const ut={attribute:!0,type:String,converter:lt,reflect:!1,hasChanged:it},_t=(t=ut,e,n)=>{const{kind:o,metadata:r}=n;let l=globalThis.litPropertyMetadata.get(r);if(l===void 0&&globalThis.litPropertyMetadata.set(r,l=new Map),o==="setter"&&((t=Object.create(t)).wrapped=!0),l.set(n.name,t),o==="accessor"){const{name:a}=n;return{set(s){const c=e.get.call(this);e.set.call(this,s),this.requestUpdate(a,c,t)},init(s){return s!==void 0&&this.C(a,void 0,t,s),s}}}if(o==="setter"){const{name:a}=n;return function(s){const c=this[a];e.call(this,s),this.requestUpdate(a,c,t)}}throw Error("Unsupported decorator location: "+o)};function pt(t){return(e,n)=>typeof n=="object"?_t(t,e,n):((o,r,l)=>{const a=r.hasOwnProperty(l);return r.constructor.createProperty(l,o),a?Object.getOwnPropertyDescriptor(r,l):void 0})(t,e,n)}var ie,y,Ve,j,we,Ue,We,Re,me,_e,pe,X={},je=[],dt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function V(t,e){for(var n in e)t[n]=e[n];return t}function de(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ne(t,e,n,o,r){var l={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Ve,__i:-1,__u:0};return r==null&&y.vnode!=null&&y.vnode(l),l}function ce(t){return t.children}function oe(t,e){this.props=t,this.context=e}function z(t,e){if(e==null)return t.__?z(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?z(t):null}function Ne(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ne(t)}}function Pe(t){(!t.__d&&(t.__d=!0)&&j.push(t)&&!ae.__r++||we!=y.debounceRendering)&&((we=y.debounceRendering)||Ue)(ae)}function ae(){for(var t,e,n,o,r,l,a,s=1;j.length;)j.length>s&&j.sort(We),t=j.shift(),s=j.length,t.__d&&(n=void 0,o=void 0,r=(o=(e=t).__v).__e,l=[],a=[],e.__P&&((n=V({},o)).__v=o.__v+1,y.vnode&&y.vnode(n),ge(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[r]:null,l,r??z(o),!!(32&o.__u),a),n.__v=o.__v,n.__.__k[n.__i]=n,Fe(l,n,a),o.__e=o.__=null,n.__e!=r&&Ne(n)));ae.__r=0}function ke(t,e,n,o,r,l,a,s,c,d,_){var i,h,m,T,N,A,I,O=o&&o.__k||je,U=e.length;for(c=(function(S,F,H,B,L){var k,f,g,p,q,D=H.length,G=D,w=0;for(S.__k=new Array(L),k=0;k<L;k++)(f=F[k])!=null&&typeof f!="boolean"&&typeof f!="function"?(p=k+w,(f=S.__k[k]=typeof f=="string"||typeof f=="number"||typeof f=="bigint"||f.constructor==String?ne(null,f,null,null,null):le(f)?ne(ce,{children:f},null,null,null):f.constructor==null&&f.__b>0?ne(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f).__=S,f.__b=S.__b+1,g=null,(q=f.__i=ft(f,H,p,G))!=-1&&(G--,(g=H[q])&&(g.__u|=2)),g==null||g.__v==null?(q==-1&&(L>D?w--:L<D&&w++),typeof f.type!="function"&&(f.__u|=4)):q!=p&&(q==p-1?w--:q==p+1?w++:(q>p?w--:w++,f.__u|=4))):S.__k[k]=null;if(G)for(k=0;k<D;k++)(g=H[k])!=null&&!(2&g.__u)&&(g.__e==B&&(B=z(g)),ze(g,g));return B})(n,e,O,c,U),i=0;i<U;i++)(m=n.__k[i])!=null&&(h=m.__i==-1?X:O[m.__i]||X,m.__i=i,A=ge(t,m,h,r,l,a,s,c,d,_),T=m.__e,m.ref&&h.ref!=m.ref&&(h.ref&&be(h.ref,null,m),_.push(m.ref,m.__c||T,m)),N==null&&T!=null&&(N=T),(I=!!(4&m.__u))||h.__k===m.__k?c=Ae(m,c,t,I):typeof m.type=="function"&&A!==void 0?c=A:T&&(c=T.nextSibling),m.__u&=-7);return n.__e=N,c}function Ae(t,e,n,o){var r,l;if(typeof t.type=="function"){for(r=t.__k,l=0;r&&l<r.length;l++)r[l]&&(r[l].__=t,e=Ae(r[l],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=z(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function ft(t,e,n,o){var r,l,a,s=t.key,c=t.type,d=e[n],_=d!=null&&!(2&d.__u);if(d===null&&t.key==null||_&&s==d.key&&c==d.type)return n;if(o>(_?1:0)){for(r=n-1,l=n+1;r>=0||l<e.length;)if((d=e[a=r>=0?r--:l++])!=null&&!(2&d.__u)&&s==d.key&&c==d.type)return a}return-1}function Ce(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||dt.test(e)?n:n+"px"}function te(t,e,n,o,r){var l,a;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||Ce(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||Ce(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")l=e!=(e=e.replace(Re,"$1")),a=e.toLowerCase(),e=a in t||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+l]=n,n?o?n.u=o.u:(n.u=me,t.addEventListener(e,l?pe:_e,l)):t.removeEventListener(e,l?pe:_e,l);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ie(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=me++;else if(e.t<n.u)return;return n(y.event?y.event(e):e)}}}function ge(t,e,n,o,r,l,a,s,c,d){var _,i,h,m,T,N,A,I,O,U,S,F,H,B,L,k,f,g=e.type;if(e.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),l=[s=e.__e=n.__e]),(_=y.__b)&&_(e);e:if(typeof g=="function")try{if(I=e.props,O="prototype"in g&&g.prototype.render,U=(_=g.contextType)&&o[_.__c],S=_?U?U.props.value:_.__:o,n.__c?A=(i=e.__c=n.__c).__=i.__E:(O?e.__c=i=new g(I,S):(e.__c=i=new oe(I,S),i.constructor=g,i.render=ht),U&&U.sub(i),i.props=I,i.state||(i.state={}),i.context=S,i.__n=o,h=i.__d=!0,i.__h=[],i._sb=[]),O&&i.__s==null&&(i.__s=i.state),O&&g.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=V({},i.__s)),V(i.__s,g.getDerivedStateFromProps(I,i.__s))),m=i.props,T=i.state,i.__v=e,h)O&&g.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),O&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(O&&g.getDerivedStateFromProps==null&&I!==m&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(I,S),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(I,i.__s,S)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(i.props=I,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(p){p&&(p.__=e)}),F=0;F<i._sb.length;F++)i.__h.push(i._sb[F]);i._sb=[],i.__h.length&&a.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(I,i.__s,S),O&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(m,T,N)})}if(i.context=S,i.props=I,i.__P=t,i.__e=!1,H=y.__r,B=0,O){for(i.state=i.__s,i.__d=!1,H&&H(e),_=i.render(i.props,i.state,i.context),L=0;L<i._sb.length;L++)i.__h.push(i._sb[L]);i._sb=[]}else do i.__d=!1,H&&H(e),_=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++B<25);i.state=i.__s,i.getChildContext!=null&&(o=V(V({},o),i.getChildContext())),O&&!h&&i.getSnapshotBeforeUpdate!=null&&(N=i.getSnapshotBeforeUpdate(m,T)),k=_,_!=null&&_.type===ce&&_.key==null&&(k=Be(_.props.children)),s=ke(t,le(k)?k:[k],e,n,o,r,l,a,s,c,d),i.base=e.__e,e.__u&=-161,i.__h.length&&a.push(i),A&&(i.__E=i.__=null)}catch(p){if(e.__v=null,c||l!=null)if(p.then){for(e.__u|=c?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;l[l.indexOf(s)]=null,e.__e=s}else{for(f=l.length;f--;)de(l[f]);fe(e)}else e.__e=n.__e,e.__k=n.__k,p.then||fe(e);y.__e(p,e,n)}else l==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):s=e.__e=(function(p,q,D,G,w,C,ot,W,rt){var u,Q,Z,K,P,R,ee,$=D.props,M=q.props,x=q.type;if(x=="svg"?w="http://www.w3.org/2000/svg":x=="math"?w="http://www.w3.org/1998/Math/MathML":w||(w="http://www.w3.org/1999/xhtml"),C!=null){for(u=0;u<C.length;u++)if((P=C[u])&&"setAttribute"in P==!!x&&(x?P.localName==x:P.nodeType==3)){p=P,C[u]=null;break}}if(p==null){if(x==null)return document.createTextNode(M);p=document.createElementNS(w,x,M.is&&M),W&&(y.__m&&y.__m(q,C),W=!1),C=null}if(x==null)$===M||W&&p.data==M||(p.data=M);else{if(C=C&&ie.call(p.childNodes),$=D.props||X,!W&&C!=null)for($={},u=0;u<p.attributes.length;u++)$[(P=p.attributes[u]).name]=P.value;for(u in $)if(P=$[u],u!="children"){if(u=="dangerouslySetInnerHTML")Z=P;else if(!(u in M)){if(u=="value"&&"defaultValue"in M||u=="checked"&&"defaultChecked"in M)continue;te(p,u,null,P,w)}}for(u in M)P=M[u],u=="children"?K=P:u=="dangerouslySetInnerHTML"?Q=P:u=="value"?R=P:u=="checked"?ee=P:W&&typeof P!="function"||$[u]===P||te(p,u,P,$[u],w);if(Q)W||Z&&(Q.__html==Z.__html||Q.__html==p.innerHTML)||(p.innerHTML=Q.__html),q.__k=[];else if(Z&&(p.innerHTML=""),ke(q.type=="template"?p.content:p,le(K)?K:[K],q,D,G,x=="foreignObject"?"http://www.w3.org/1999/xhtml":w,C,ot,C?C[0]:D.__k&&z(D,0),W,rt),C!=null)for(u=C.length;u--;)de(C[u]);W||(u="value",x=="progress"&&R==null?p.removeAttribute("value"):R!=null&&(R!==p[u]||x=="progress"&&!R||x=="option"&&R!=$[u])&&te(p,u,R,$[u],w),u="checked",ee!=null&&ee!=p[u]&&te(p,u,ee,$[u],w))}return p})(n.__e,e,n,o,r,l,a,c,d);return(_=y.diffed)&&_(e),128&e.__u?void 0:s}function fe(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(fe)}function Fe(t,e,n){for(var o=0;o<n.length;o++)be(n[o],n[++o],n[++o]);y.__c&&y.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(l){l.call(r)})}catch(l){y.__e(l,r.__v)}})}function Be(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:le(t)?t.map(Be):V({},t)}function be(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){y.__e(r,n)}}function ze(t,e,n){var o,r;if(y.unmount&&y.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||be(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(l){y.__e(l,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&ze(o[r],e,n||typeof t.type!="function");n||de(t.__e),t.__c=t.__=t.__e=void 0}function ht(t,e,n){return this.constructor(t,n)}function Se(t,e,n){var o,r,l;e==document&&(e=document.documentElement),y.__&&y.__(t,e),o=e.__k,r=[],l=[],ge(e,t=e.__k=(function(a,s,c){var d,_,i,h={};for(i in s)i=="key"?d=s[i]:i=="ref"?_=s[i]:h[i]=s[i];if(arguments.length>2&&(h.children=arguments.length>3?ie.call(arguments,2):c),typeof a=="function"&&a.defaultProps!=null)for(i in a.defaultProps)h[i]===void 0&&(h[i]=a.defaultProps[i]);return ne(a,h,d,_,null)})(ce,null,[t]),o||X,X,e.namespaceURI,o?null:e.firstChild?ie.call(e.childNodes):null,r,o?o.__e:e.firstChild,!1,l),Fe(r,t,l)}ie=je.slice,y={__e:function(t,e,n,o){for(var r,l,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((l=r.constructor)&&l.getDerivedStateFromError!=null&&(r.setState(l.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),a=r.__d),a)return r.__E=r}catch(s){t=s}throw t}},Ve=0,oe.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=V({},this.state),typeof t=="function"&&(t=t(V({},n),this.props)),t&&V(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Pe(this))},oe.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Pe(this))},oe.prototype.render=ce,j=[],Ue=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,We=function(t,e){return t.__v.__b-e.__v.__b},ae.__r=0,Re=/(PointerCapture)$|Capture$/i,me=0,_e=Ie(!1),pe=Ie(!0);var yt=0;function E(t,e,n,o,r,l){e||(e={});var a,s,c=e;if("ref"in c)for(s in c={},e)s=="ref"?a=e[s]:c[s]=e[s];var d={type:t,props:c,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--yt,__i:-1,__u:0,__source:r,__self:l};if(typeof t=="function"&&(a=t.defaultProps))for(s in a)c[s]===void 0&&(c[s]=a[s]);return y.vnode&&y.vnode(d),d}class mt{async getPresentation(e,n){const o=new URL(`/api/2.2/rest/widgets/${e}.json`,`https://${n}`);let r;o.searchParams.set("offset","0"),o.searchParams.set("limit","1"),o.searchParams.set("sortBy","created,DESCENDING"),o.searchParams.set("useUserAuth","false");try{r=await fetch(o.toString(),{method:"GET"})}catch(a){throw new Error(`Failed to fetch presentation from host "${n}": ${a.message}`,{cause:a})}const{kulus:l}=await r.json();if(!r.ok||l.length===0)throw new Error(`Failed to fetch presentation with guid "${e}" from host "${n}"`);return l[0]}}const gt=new Set(["selector","host","guid","widgetOptions","playerParameters"]),bt=new Set(["playbackMode","playerConfigurationGuid","playIcon","onThumbnailClick"]),vt=new Set(["captions","debug","loop","pv","quality","showControlPanel","sidebar","speech","speechTerm","start","volume","reporting","reportingId"]);class wt{validateAndSanitize(e){if(!e||typeof e!="object")throw new Error("Configuration must be a valid object");["selector","host","guid"].forEach(o=>{const r=e[o];if(Object.hasOwn(e,o)===!1)throw new Error(`\`${o}\` is not defined in the configuration`);if(r==null)throw new Error(`\`${o}\` is undefined or null`);if(!(o==="selector"&&r instanceof HTMLElement)){if(typeof r!="string")throw new TypeError(`\`${o}\` must be a string${o==="selector"?" or an instance of HTMLElement":""}`);if(r.trim()==="")throw new Error(`\`${o}\` cannot be an empty string`)}});const n={...e,playerParameters:{...e.playerParameters},widgetOptions:{...e.widgetOptions}};e.widgetOptions?.playIcon&&(n.widgetOptions.playIcon={...e.widgetOptions.playIcon}),Object.keys(n).forEach(o=>{gt.has(o)||(console.warn(`Unsupported field \`${o}\` in configuration`),delete n[o])});try{new URL(`https://${n.host.replace("https://","")}`)}catch{throw new Error("`host` must be a valid domain name")}return this.validatePlayerParameters(n.playerParameters),this.validateWidgetOptions(n.widgetOptions),n}validatePlayerParameters(e){if(e){if(Object.keys(e).forEach(n=>{vt.has(n)||(console.warn(`Unsupported field \`playerParameters.${n}\` in configuration`),delete e[n])}),e.pv!==void 0&&!["pipls","pipss","sbs"].includes(e.pv))throw new Error('`playerParameters.pv` must be either "pipls", "pipss" or "sbs"');if(e.quality!==void 0&&!["240p","480p","720p","1080p","1440p","auto"].includes(e.quality))throw new Error('`playerParameters.quality` must be either "240p", "480p", "720p", "1080p", "1440p" or "auto"')}}validateWidgetOptions(e){if(e){if(Object.keys(e).forEach(n=>{bt.has(n)||(console.warn(`Unsupported field \`widgetOptions.${n}\` in configuration`),delete e[n])}),e.playbackMode!==void 0){const n=e.playbackMode;if(!["inline","inline-autoload","inline-autoplay","modal"].includes(n))throw new Error('`widgetOptions.playbackMode` must be either "inline", "inline-autoload", "inline-autoplay" or "modal"')}if(e.playIcon!==void 0){if(e.playIcon.position!==void 0&&!["top-left","top","top-right","left","center","right","bottom-left","bottom","bottom-right"].includes(e.playIcon.position))throw new Error("`widgetOptions.playIcon.position` must be a valid position value");[void 0,"inline","modal"].includes(e.playbackMode)||console.warn('`widgetOptions.playIcon` is only applicable when `widgetOptions.playbackMode` is either "modal" or "inline"')}if(e.onThumbnailClick!==void 0){if([void 0,"inline"].includes(e.playbackMode)===!1)console.warn('`widgetOptions.onThumbnailClick` is only applicable when `widgetOptions.playbackMode` is "inline"'),delete e.onThumbnailClick;else if(typeof e.onThumbnailClick!="function")throw new TypeError("`widgetOptions.onThumbnailClick` must be a function")}}}setDefaults(e){const n={playbackMode:"inline",...e.widgetOptions},o={...e.playerParameters};return{...e,host:e.host.replace("https://","").replace(/\/.*$/,""),playerParameters:o,widgetOptions:n}}}class Pt{promise;resolve;reject;constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}var Y,b,ue,qe,se=0,Ge=[],v=y,Ee=v.__b,Oe=v.__r,xe=v.diffed,$e=v.__c,Me=v.unmount,Te=v.__;function ve(t,e){v.__h&&v.__h(b,t,se||e),se=0;var n=b.__H||(b.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Qe(t){return se=1,(function(e,n){var o=ve(Y++,2);if(o.t=e,!o.__c&&(o.__=[De(void 0,n),function(s){var c=o.__N?o.__N[0]:o.__[0],d=o.t(c,s);c!==d&&(o.__N=[d,o.__[1]],o.__c.setState({}))}],o.__c=b,!b.__f)){var r=function(s,c,d){if(!o.__c.__H)return!0;var _=o.__c.__H.__.filter(function(h){return!!h.__c});if(_.every(function(h){return!h.__N}))return!l||l.call(this,s,c,d);var i=o.__c.props!==s;return _.forEach(function(h){if(h.__N){var m=h.__[0];h.__=h.__N,h.__N=void 0,m!==h.__[0]&&(i=!0)}}),l&&l.call(this,s,c,d)||i};b.__f=!0;var l=b.shouldComponentUpdate,a=b.componentWillUpdate;b.componentWillUpdate=function(s,c,d){if(this.__e){var _=l;l=void 0,r(s,c,d),l=_}a&&a.call(this,s,c,d)},b.shouldComponentUpdate=r}return o.__N||o.__})(De,t)}function Je(t,e){var n=ve(Y++,3);!v.__s&&Ye(n.__H,e)&&(n.__=t,n.u=e,b.__H.__h.push(n))}function Xe(t){return se=5,(function(e,n){var o=ve(Y++,7);return Ye(o.__H,n)&&(o.__=e(),o.__H=n,o.__h=e),o.__})(function(){return{current:t}},[])}function kt(){for(var t;t=Ge.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(re),t.__H.__h.forEach(he),t.__H.__h=[]}catch(e){t.__H.__h=[],v.__e(e,t.__v)}}v.__b=function(t){b=null,Ee&&Ee(t)},v.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},v.__r=function(t){Oe&&Oe(t),Y=0;var e=(b=t.__c).__H;e&&(ue===b?(e.__h=[],b.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(re),e.__h.forEach(he),e.__h=[],Y=0)),ue=b},v.diffed=function(t){xe&&xe(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ge.push(e)!==1&&qe===v.requestAnimationFrame||((qe=v.requestAnimationFrame)||Ct)(kt)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ue=b=null},v.__c=function(t,e){e.some(function(n){try{n.__h.forEach(re),n.__h=n.__h.filter(function(o){return!o.__||he(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],v.__e(o,n.__v)}}),$e&&$e(t,e)},v.unmount=function(t){Me&&Me(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{re(o)}catch(r){e=r}}),n.__H=void 0,e&&v.__e(e,n.__v))};var He=typeof requestAnimationFrame=="function";function Ct(t){var e,n=function(){clearTimeout(o),He&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);He&&(e=requestAnimationFrame(n))}function re(t){var e=b,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),b=e}function he(t){var e=b;t.__c=t.__(),b=e}function Ye(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function De(t,e){return typeof e=="function"?e(t):e}function Ze({presentation:t,onClick:e,widgetOptions:n}){const o={};n.playIcon?.width&&(o.width=`${n.playIcon.width}px`),n.playIcon?.height&&(o.height=`${n.playIcon.height}px`);const r=n.playIcon?.position||"center",l=r.includes("left")?"start":r.includes("right")?"end":"center";return E("button",{type:"button",class:"qc-thumbnail",onClick:()=>{n.onThumbnailClick?n.onThumbnailClick(t):e()},style:{"place-items":`${r.includes("top")?"start":r.includes("bottom")?"end":"center"} ${l}`},children:[E("img",{class:"qc-thumbnail__image",src:t.thumbnail?.cdnUrl||t.thumbnail?.url,alt:`Thumbnail for ${t.title}`}),n.playIcon?.url?E("img",{alt:"Play",class:"qc-thumbnail__play-button",src:n.playIcon?.url,style:o}):E("div",{class:"qc-thumbnail__play-button qc-thumbnail__play-button--default",dangerouslySetInnerHTML:{__html:n.playIcon?.url||'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="currentColor" width="64" height="64"><path d="M22.643 17.734a1 1 0 000-1.696L12.417 9.647a1 1 0 00-1.53.848v12.783a1 1 0 001.53.848l10.226-6.392zm-9.166 8.088a3 3 0 01-4.59-2.544V10.495a3 3 0 014.59-2.544l10.226 6.391a3 3 0 010 5.088l-10.226 6.392z"></path></svg>'},style:o})]})}function Ke({presentation:t,onIframeReady:e,widgetOptions:n,playerParameters:o}){const[r,l]=Qe(["inline-autoload","inline-autoplay","modal"].includes(n.playbackMode)),a=Xe(null);Je(()=>{if(!r||!a.current)return;const _=a.current,i=()=>{e?.(_)};return _.addEventListener("load",i),()=>{_.removeEventListener("load",i)}},[r]);const s=new URL(t.player||""),c=["inline-autoplay","inline","modal"].includes(n.playbackMode);s.searchParams.set("autoplay",c.toString()),Object.entries(o).forEach(([_,i])=>{s.searchParams.set(_,String(i))}),n.playerConfigurationGuid&&s.searchParams.set("playerConfigurationGuid",n.playerConfigurationGuid);const d=E("iframe",{ref:a,src:s.toString(),width:"100%",height:"100%",allow:"autoplay; fullscreen",title:"Qumu Player",class:"qc-player"});return r?d:E(Ze,{presentation:t,onClick:()=>l(!0),widgetOptions:n})}function It({presentation:t,onIframeReady:e,widgetOptions:n,playerParameters:o}){const[r,l]=Qe(!1),a=Xe(null);Je(()=>{r&&a.current?.showModal()},[r]);const s=()=>{a.current?.close(),l(!1)};return t?E("div",{class:"qc-dialog",children:[E(Ze,{onClick:()=>l(!0),presentation:t,widgetOptions:n}),r&&E("dialog",{ref:a,onClick:c=>{c.target===a.current&&s()},onClose:()=>l(!1),style:{"aspect-ratio":`${t?.mediaDisplayWidth} / ${t?.mediaDisplayHeight}`},children:[E("button",{type:"button",class:"qc-dialog__close-button",onClick:s,dangerouslySetInnerHTML:{__html:`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor">
<path d="M19.2722 16.1472L28.6472 25.5222C29.0616 25.9366 29.2944 26.4986 29.2944 27.0847C29.2944 27.6708 29.0616 28.2328 28.6472 28.6472C28.2328 29.0616 27.6708 29.2944 27.0847 29.2944C26.4986 29.2944 25.9366 29.0616 25.5222 28.6472L16.1472 19.2722L6.77221 28.6472C6.35781 29.0616 5.79576 29.2944 5.20971 29.2944C4.62366 29.2944 4.06161 29.0616 3.64721 28.6472C3.23281 28.2328 3 27.6708 3 27.0847C3 26.4986 3.23281 25.9366 3.64721 25.5222L13.0222 16.1472L3.64721 6.77221C3.23281 6.35781 3 5.79576 3 5.20971C3 4.62366 3.23281 4.06161 3.64721 3.64721C4.06161 3.23281 4.62366 3 5.20971 3C5.79576 3 6.35781 3.23281 6.77221 3.64721L16.1472 13.0222L25.5222 3.64721C25.9366 3.23281 26.4986 3 27.0847 3C27.6708 3 28.2328 3.23281 28.6472 3.64721C29.0616 4.06161 29.2944 4.62366 29.2944 5.20971C29.2944 5.79576 29.0616 6.35781 28.6472 6.77221L19.2722 16.1472Z"/>
</svg>
`}}),E(Ke,{presentation:t,onIframeReady:e,playerParameters:o,widgetOptions:n})]})]}):""}class St{iframeDeferred=new Pt;configurationService=new wt;configuration;presentationService=new mt;presentation=null;container=null;destroyed=!1;constructor(e){this.configuration=this.configurationService.validateAndSanitize(e),this.configuration=this.configurationService.setDefaults(this.configuration),this.init()}destroy(){this.destroyed||(this.container&&(Se(null,this.container),this.container.innerHTML=""),this.presentation=null,this.destroyed=!0)}getIframe(){return this.iframeDeferred.promise}async init(){try{this.presentation=await this.presentationService.getPresentation(this.configuration.guid,this.configuration.host),this.mount()}catch(e){this.iframeDeferred.reject(e)}}mount(){const e=this.configuration.selector instanceof HTMLElement?this.configuration.selector:document.querySelector(this.configuration.selector);if(!e)throw new Error(`Element for selector "${this.configuration.selector}" not found`);this.container=e,e.innerHTML="",Se(E("div",{class:"qc-widget qc-presentation-widget",style:{"aspect-ratio":`${this.presentation?.mediaDisplayWidth} / ${this.presentation?.mediaDisplayHeight}`},children:this.configuration.widgetOptions?.playbackMode==="modal"?E(It,{presentation:this.presentation,onIframeReady:this.iframeDeferred.resolve,playerParameters:this.configuration.playerParameters,widgetOptions:this.configuration.widgetOptions}):E(Ke,{presentation:this.presentation,onIframeReady:this.iframeDeferred.resolve,playerParameters:this.configuration.playerParameters,widgetOptions:this.configuration.widgetOptions})}),e)}}var qt=Object.defineProperty,Et=Object.getOwnPropertyDescriptor,et=(t,e,n,o)=>{for(var r=o>1?void 0:o?Et(e,n):e,l=t.length-1,a;l>=0;l--)(a=t[l])&&(r=(o?a(e,n,r):a(r))||r);return o&&r&&qt(e,n,r),r};let ye=class extends at{constructor(){super(...arguments),this.widget=null}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.widget&&(this.widget.destroy(),this.widget=null)}createRenderRoot(){return this}firstUpdated(){const t=this.renderRoot.querySelector("#container");t&&(this.widget=new St({selector:t,...this.configuration}))}render(){return st`
      <div id="container"></div>`}};et([pt({type:Object})],ye.prototype,"configuration",2);ye=et([ct("presentation-widget")],ye);const tt=`--qc-theme-background-color: #09091a;
--qc-theme-color: #f5f8fa;

// Presentation widget style
--qc-presentation-widget-border-radius: 0;
--qc-presentation-widget-height: 100%;
--qc-presentation-widget-width: 100%;

// Thumbnail style
--qc-thumbnail-image-fit: cover;

// Play Icon
--qc-thumbnail-play-button-height: var(--qc-thumbnail-play-button-width);
--qc-thumbnail-play-button-margin: calc(var(--qc-thumbnail-play-button-width) / 2);
--qc-thumbnail-play-button-width: 64px;
--qc-thumbnail-play-button-background-color: var(--qc-theme-background-color);
--qc-thumbnail-play-button-background-opacity: 0.8;
--qc-thumbnail-play-button-background-opacity-hover: 1;

// Dialog style
--qc-dialog-backdrop: rgb(0 0 0 / 0.5);
--qc-dialog-background-color: #000;
--qc-dialog-border-color: #000;
--qc-dialog-border-radius: 0;
--qc-dialog-border-style: solid;
--qc-dialog-border-width: 3px;
--qc-dialog-close-button-background-color: var(--qc-theme-background-color);
--qc-dialog-close-button-background-opacity: 0.8;
--qc-dialog-close-button-background-opacity-hover: 1;
--qc-dialog-close-button-color: var(--qc-theme-color);
--qc-dialog-close-button-padding: 6px;
--qc-dialog-close-button-shadow: 0 0 1px 1px #000000;
--qc-dialog-close-icon-size: 20px;
--qc-dialog-padding: 0;
--qc-dialog-width-max: 1100px;
--qc-dialog-width: 90vw;`,Le=tt.split(`
`).filter(t=>t.startsWith("--qc-")).reduce((t,e)=>{const[n,o]=e.split(":").map(r=>r?.trim());return t.set(n,o.replace(";","")),t},new Map);function nt(t){const e={playbackMode:t.playbackMode};t.playIconPosition&&(e.playIcon=e.playIcon||{},e.playIcon.position=t.playIconPosition),t.playIconWidth!==void 0&&t.playIconWidth!==null&&(e.playIcon=e.playIcon||{},e.playIcon.width=t.playIconWidth),t.playIconHeight!==void 0&&t.playIconHeight!==null&&(e.playIcon=e.playIcon||{},e.playIcon.height=t.playIconHeight),t.playIconUrl&&(e.playIcon=e.playIcon||{},e.playIcon.url=t.playIconUrl);const n={};return t.playerCaptions&&(n.captions=t.playerCaptions),t.playerDebug!==void 0&&t.playerDebug!==null&&(n.debug=t.playerDebug),t.playerLoop!==void 0&&t.playerLoop!==null&&(n.loop=t.playerLoop),t.playerView&&(n.pv=t.playerView),t.playerQuality&&(n.quality=t.playerQuality),t.playerShowControlPanel!==void 0&&t.playerShowControlPanel!==null&&(n.showControlPanel=t.playerShowControlPanel),t.playerSidebar!==void 0&&t.playerSidebar!==null&&(n.sidebar=t.playerSidebar),t.playerStart&&(n.start=t.playerStart),t.playerVolume&&(n.volume=t.playerVolume),t.playerReporting!==void 0&&t.playerReporting!==null&&(n.reporting=t.playerReporting),t.playerReportingId&&(n.reportingId=t.playerReportingId),{host:t.host,guid:t.guid,widgetOptions:e,playerParameters:n}}function Ot(t){return t.split(`
`).filter(e=>e.startsWith("--qc-")).reduce((e,n)=>{let[o,r]=n.split(":").map(l=>l?.trim());return r=r?.replace(";",""),Le.has(o)&&Le.get(o)!==r&&e.push(`${o}: ${r};`),e},[]).join(`
`)}const Tt={argTypes:{host:{control:"text"},guid:{control:"text"},playbackMode:{control:"select",name:"Playback Mode",options:["inline","inline-autoload","inline-autoplay","modal"],table:{defaultValue:{summary:"inline"}}},playIconPosition:{control:"select",name:"Position",options:["top-left","top","top-right","left","center","right","bottom-left","bottom","bottom-right"],table:{category:"Play Icon",defaultValue:{summary:"center"}}},playIconWidth:{control:"number",name:"Width",table:{category:"Play Icon",defaultValue:{summary:44}}},playIconHeight:{control:"number",name:"Height",table:{category:"Play Icon",defaultValue:{summary:44}}},playIconUrl:{control:"text",name:"Custom Play Icon URL",table:{category:"Play Icon"}},playerCaptions:{control:"text",name:"Captions",table:{category:"Player Parameters"}},playerDebug:{control:"boolean",name:"Enable Debug Mode",table:{category:"Player Parameters",defaultValue:{summary:"false"}}},playerLoop:{control:"boolean",name:"Loop",table:{category:"Player Parameters",defaultValue:{summary:"false"}}},playerView:{control:"select",name:"View",options:["pipls","pipss","sbs"],table:{category:"Player Parameters",defaultValue:{summary:"pipls"}}},playerQuality:{control:"select",name:"Quality",options:["auto","best","1440p","1080p","720p","360p","240p"],table:{category:"Player Parameters",defaultValue:{summary:"auto"}}},playerShowControlPanel:{control:"boolean",name:"Show the Control Panel",table:{category:"Player Parameters",defaultValue:{summary:"true"}}},playerSidebar:{control:"boolean",name:"Show the Sidebar",table:{category:"Player Parameters",defaultValue:{summary:"true"}}},playerStart:{control:"text",name:"Start at",table:{category:"Player Parameters",defaultValue:{summary:"0"}}},playerVolume:{control:"range",max:100,min:0,name:"Volume",table:{category:"Player Parameters",defaultValue:{summary:100}}},playerReporting:{control:"boolean",name:"Enable Playback Analytics",table:{category:"Player Parameters",defaultValue:{summary:"true"}}},playerReportingId:{control:"text",name:"Reporting ID",table:{category:"Player Parameters"}},cssVars:{control:{multiline:!0,type:"text"},name:"CSS Variables",table:{category:"CSS Variables"}}},parameters:{docs:{source:{transform:(t,e)=>{const n=nt(e.args),o=Ot(e.args.cssVars);return`
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title>Presentation Widget</title>
    <link rel="stylesheet" href="https://unpkg.com/@enghouse-qumu/widget@<version>/presentation-widget.css">${o.length>0?`
    <style>
      :root {
        ${o.split(`
`).map((l,a)=>a===0?l:`        ${l}`).join(`
`)}
      }
    </style>`:""}
  </head>
  <body>
    <div id="widget"></div>
    
    <script type="module">
      import { PresentationWidget } from 'https://unpkg.com/@enghouse-qumu/widget@<version>/presentation-widget.js';
      
      const widget = new PresentationWidget(${JSON.stringify(n,null,2).split(`
`).map((l,a)=>a===0?l:`      ${l}`).join(`
`)});
    <\/script>
  </body>
</html>
          `}}}},title:"Widgets/Presentation Widget"},xt=t=>{const e=document.createElement("presentation-widget");return e.configuration=nt(t),t.cssVars?.split(`
`).forEach(n=>{if(!n.startsWith("--qc-"))return;const[o,r]=n.split(":").map(l=>l?.trim());o&&r&&e.style.setProperty(o,r.replace(";",""))}),e},J=xt.bind({});J.args={host:"demo.qumucloud.com",guid:"JN6JHrg17xpwF8klXSIfFj",playbackMode:"inline",playIconPosition:"center",cssVars:tt};J.parameters={...J.parameters,docs:{...J.parameters?.docs,source:{originalSource:`(args: Partial<Args>) => {
  const el = document.createElement('presentation-widget') as PresentationWidgetComponent;
  el.configuration = getConfiguration(args);
  args.cssVars?.split('\\n').forEach((line: string) => {
    if (!line.startsWith('--qc-')) {
      return;
    }
    const [key, value] = line.split(':').map(s => s?.trim());
    if (key && value) {
      el.style.setProperty(key, value.replace(';', ''));
    }
  });
  return el;
}`,...J.parameters?.docs?.source}}};const Ht=["BasicExample"];export{J as BasicExample,Ht as __namedExportsOrder,Tt as default};
