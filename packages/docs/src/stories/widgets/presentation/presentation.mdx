import { Canvas, Meta } from '@storybook/addon-docs/blocks';
import * as Stories from './presentation.stories.ts';

<Meta
  title="Widgets/Presentation"
/>


# Presentation widget

The new presentation widget replaces the old "playback" and "thumbnail" widget.

## Basic Usage

<Canvas of={Stories.Basic}/>

## Recipes

### Inline vs Modal

The `inline` playback mode is equivalent to the old "playback" widget, while the `modal` playback mode is equivalent to the old "thumbnail" widget.

<Canvas of={Stories.PlaybackThumbnail}/>

### Change the Player Icon

<Canvas of={Stories.CustomPlayIcon}/>

### Use the Player SDK with the widget

Qumu Cloud provides a [Player SDK](https://qumu.github.io/player-sdk/) that can be used to control the playback of the presentation.

<Canvas of={Stories.PlayerSdk}/>


## API

### PresentationWidget

| Property/Method                                                           | Type                          | Description                              |
|---------------------------------------------------------------------------|-------------------------------|------------------------------------------|
| version                                                                   | `string`                      | The widget's version.                    |
| static create(configuration: [WidgetConfiguration](#widgetconfiguration)) | `Promise<PresentationWidget>` | Create the widget.                       |
| destroy()                                                                 | `void`                        | Destroy the widget and clean up the DOM. |


### WidgetConfiguration

| Property         | Type                                                 | Required | Default                             | Description                                                                                                                                                                                                |
|------------------|------------------------------------------------------|----------|-------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| guid             | `string`                                             | **Yes**  | `''`                                | <p>Defines the guid of presentation or Smart Search to show.</p><p>In the case of a Smart Search, the first presentation will be used. You can use `sortBy` and `sortOrder` to sort your Smart Search.</p> |
| host             | `string`                                             | **Yes**  | `''`                                | Defines the Qumu Cloud tenant to get the presentation from (i.e: demo.qumucloud.com)                                                                                                                       |
| selector         | `string \| HTMLElement`                              | **Yes**  | `''`                                | Defines the HTML element to create the widget into. It can be a HTMLElement or a string used by [document.querySelector()](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector).       |
| playerParameters | [Partial&lt;PlayerParameters&gt;](#playerparameters) | No       | `undefined`                         | Defines the parameters to add to the Qumu Cloud player.                                                                                                                                                    |
| sortBy           | `string`                                             | No       | `''`                                | <p>Defines the property to use when sorting the smart search.</p><p>⚠️ This property is only useful when using a smart search guid.</p>                                                                    |
| sortOrder        | `string`                                             | No       | `'DESCENDING'`                      | <p>Defines the order to sort the smart search. Value must be one of: `ASCENDING`, `DESCENDING`.</p><p>⚠️ This property is only useful when using a smart search guid.</p>                                  |
| widgetOptions    | [Partial&lt;widgetOptions&gt;](#widgetoptions)       | No       | See [WidgetOptions](#widgetoptions) | Defines the widget options.                                                                                                                                                                                |


### PlayerParameters

| Property                | Type               | Description                                                                                                                                                                                                       |
|-------------------------|--------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| audio                   | `string`           | Defines the audio language on playback start.                                                                                                                                                                     |
| captions                | `string`           | Defines the captions language on playback start.                                                                                                                                                                  |
| debug                   | `string`           | <p>Enable the debug mode. This will add logs to the Browser's console and provide a Debug view in the player.</p><p>⚠️ This has an impact on performance so we recommend to keep it turned off in production.</p> |
| loop                    | `string`           | Allows the presentation to loop once playback ends.                                                                                                                                                               |
| playerConfigurationGuid | `string`           | The GUID of a specific Player Configuration. Useful if you want to override the player configuration at the presentation's level                                                                                  |
| pv                      | `string`           | The player view. <ul><li>`pipls`: Picture-in-Picture, large slides.</li><li>`pipss`: Picture-in-Picture small slides.</li><li>`sbs`: Side by Side.</li></ul>                                                      |
| quality                 | `string`           | You can force a playback quality. Value must be one of: `auto` (default), `best`, `1440p`, `1080p`, `720p`, `480p`, `240p`.                                                                                       |
| reporting               | `boolean`          | Defines whether the playback sends analytics data to Qumu Cloud.                                                                                                                                                  |
| reportingId             | `string`           | Defines a unique reportingId in the Qumu Cloud Analytics dashboard.                                                                                                                                               |
| showControlPanel        | `boolean`          | Defines whether the control panel is visible or not.                                                                                                                                                              |
| sidebar                 | `boolean`          | Defines whether the sidebar is visible or not.                                                                                                                                                                    |
| speech                  | `string`           | Defines the query for the Speech Search.                                                                                                                                                                          |
| speechTerm              | `string`           | Defines the default active term for the Speech Search. This must be used alongside `speech`.                                                                                                                      |
| start                   | `number \| string` | Defines the playback start. This can be the number of seconds (i.e. `123`) or a string in the `hh:mm:ss` format (i.e. `00:10`).                                                                                   |
| volume                  | `string`           | <p>Defines the volume of the video from `0` to `100`.</p><p>⚠️ The [autoplay policy](https://developer.chrome.com/blog/autoplay) in the browser may bypass your volume preference.</p>                            |

### WidgetOptions

| Property         | Type                                       | Default     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|------------------|--------------------------------------------|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| playbackMode     | `string`                                   | `inline`    | Define the playback mode. <ul><li>`inline`: Show a thumbnail. Replace the thumbnail with the player when the user clicks on the play icon.</li><li>`inline-autoload`: Load the player but requires the user to click play to start the playback.</li><li>`inline-autoplay`: Load the player and starts the playback automatically.</li><li>`modal`: Show a thumbnail. Open the player in a modal when the user clicks the play icon</li></ul> |
| playIconUrl      | `string`                                   | `undefined` | Defines the URL to a custom play icon image.                                                                                                                                                                                                                                                                                                                                                                                                  |
| style            | [Partial&lt;WidgetStyle&gt;](#widgetstyle) | `undefined` | Defines the style of the widget.                                                                                                                                                                                                                                                                                                                                                                                                              |
| onIframeLoaded   | `(iframe: HTMLIFrameElement) => void`      | `undefined` | Method triggered once the iframe is loaded. Useful to load our Player SDK.                                                                                                                                                                                                                                                                                                                                                                    |
| onThumbnailClick | `(presentation: Presentation) => void`     | `undefined` | Method triggered once the thumbnail is clicked. Useful to bypass the default behaviour of the widget. Only works when playback mode is `inline` or `modal`.                                                                                                                                                                                                                                                                                   |

### WidgetStyle


| Property                          | Default                                                          | Description                                                                                                                                                 |
|-----------------------------------|------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| borderRadius                      | `0px`                                                            | The border radius of the widget container.                                                                                                                  |
| height                            | `100%`                                                           | The height of the widget container.                                                                                                                         |
| width                             | `100%`                                                           | The width of the widget container.                                                                                                                          |
| playButton.backgroundColor        | `rgb(0 0 0 / .8)`                                                | The background color of the play button.                                                                                                                    |
| playButton.color                  | `#fff`                                                           | The color of the play button.                                                                                                                               |
| playButton.hoverBackgroundColor   | `rgb(0 0 0 / .9)`                                                | The background color of the play button on hover.                                                                                                           |
| playButton.hoverColor             | `#fff`                                                           | The color of the play button on hover.                                                                                                                      |
| playButton.activeBackgroundColor  | `#000`                                                           | The background color of the play button when active.                                                                                                        |
| playButton.activeColor            | `#fff`                                                           | The color of the play button when active.                                                                                                                   |
| playButton.margin                 | `16px`                                                           | The margin around the thumbnail’s play button.                                                                                                              |
| playButton.padding                | `8px`                                                            | The padding between the play icon and the button background.                                                                                                |
| playButton.position               | `center`                                                         | Defines the play icon's position. Value must be one of : `top-left`, `top`, `top-right`, `left`, `center`, `right`, `bottom-left`, `bottom`, `bottom-right` |
| playButton.height                 | `44px`                                                           | Defines the play icon's height                                                                                                                              |
| playButton.width                  | `44px`                                                           | Defines the play icon's width                                                                                                                               |
| thumbnail.imageFit                | `cover`                                                          | How the thumbnail image fits its container. See [object-fit](https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Properties/object-fit).             |
| dialog.backdropColor              | `rgb(0 0 0 / .5)`                                                | The color of the modal backdrop overlay.                                                                                                                    |
| dialog.backgroundColor            | `#000`                                                           | The background color of the modal container.                                                                                                                |
| dialog.border                     | `3px solid #000`                                                 | The border of the modal.                                                                                                                                    |
| dialog.borderRadius               | `0`                                                              | The border radius of the modal container.                                                                                                                   |
| dialog.padding                    | `0`                                                              | The padding inside the modal container between the border and the content.                                                                                  |
| dialog.max-width                  | `1100px`                                                         | The maximum width of the modal.                                                                                                                             |
| dialog.width                      | `90vw`                                                           | The default width of the modal.                                                                                                                             |
| closeButton.backgroundColor       | `rgb(0 0 0 / .75)`                                               | The background color of the close button.                                                                                                                   |
| closeButton.color                 | `#fff`                                                           | The color of the close button icon.                                                                                                                         |
| closeButton.hoverBackgroundColor  | `rgb(0 0 0 / .9)`                                                | The background color of the close button on hover.                                                                                                          |
| closeButton.hoverColor            | `#fff`                                                           | The color of the close button icon on hover.                                                                                                                |
| closeButton.activeBackgroundColor | `#000`                                                           | The background color of the close button when active.                                                                                                       |
| closeButton.activeColor           | `#fff`                                                           | The color of the close button icon when active.                                                                                                             |
| closeButton.boxShadow             | `0 0 1px 1px #000`                                               | The box shadow of the close button.                                                                                                                         |
| closeButton.iconSize              | `20px`                                                           | The size of the close button icon.                                                                                                                          |
| closeButton.padding               | `6px`                                                            | The padding between the close icon and the button background.                                                                                               |
| notFound.backgroundColor          | `transparent`                                                    | The background color of the “Not Found” message container.                                                                                                  |
| notFound.border                   | `1px solid light-dark(rgb(0 0 0 / .15), rgb(255 255 255 / .15))` | The border of the “Not Found” message container.                                                                                                            |
| notFound.color                    | `light-dark(#000, #fff)`                                         | The text color of the “Not Found” message.                                                                                                                  |
| notFound.iconColor                | `light-dark(rgb(0 0 0 / .25), rgb(255 255 255 / .25))`           | The color of the “Not Found” icon.                                                                                                                          |

## Playground

The [playground](/story/stories-widgets-presentation--playground) offers a live editor to try out different configurations. You can find the different properties in the Controls panel.
